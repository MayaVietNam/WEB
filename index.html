<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cổng Dịch Vụ Thuê Wifi - MayaVietNam</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Choices.js for custom select -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <!-- [QUAN TRỌNG] Tải file báo giá mặc định -->
    <script src="./price-table.js"></script>
    <style>
        /* Custom font */
        @import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap');
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #e5eefb; 
        }
        /* CSS cho nền logo lặp lại */
        .bg-logo-bg { pointer-events: none; position: fixed; z-index: 0; left: 0; top: 0; width: 100vw; height: 100vh; overflow: hidden; }
        .bg-logo-bg-inner { position: absolute; left: 50%; top: 50%; width: 200vw; height: 200vh; transform: translate(-50%, -50%) rotate(-10deg); background-image: url('https://i.postimg.cc/yd4v4YHG/EZ-LOGO-31.png'); background-repeat: repeat; background-size: 120px auto; opacity: 0.07; will-change: transform; }

        /* Animations */
        .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; opacity: 0; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
        /* Modal styles */
        .modal-backdrop { transition: opacity 0.3s ease; }

        /* Footer styles */
        .footer-company-info { font-size: 0.95em; background: linear-gradient(90deg, #fbeff0 0%, #dbeafe 100%); color: #0c2245; border-radius: 10px 10px 0 0; box-shadow: 0 0 8px 0 #0002; padding: 0.7rem 1.1rem 0.8rem 1.1rem; margin: 2.2rem auto 0 auto; text-align: center; max-width: 600px; border-top: 3px solid #da1a32; border-left: 1.5px solid #c7e0fb; border-right: 1.5px solid #c7e0fb; }
        .footer-company-info h2 { font-size: 1.18rem; font-weight: bold; color: #da1a32; margin-bottom: 0.12rem; letter-spacing: 0.03em; text-transform: uppercase; }
        .footer-company-info .en { color: #2563eb; font-weight: 500; font-size: 0.98em; margin-bottom: 0.2em; letter-spacing: 0.01em; }
        .footer-company-info .line { font-size: 1em; margin-bottom: 2px;}
        .footer-company-info .label { font-weight: 600; }
        .lang-en-text { display: none; } /* Ẩn tiếng Anh mặc định */
    </style>
</head>
<body class="text-gray-800 min-h-screen flex flex-col">

    <!-- Nền logo lặp lại -->
    <div class="bg-logo-bg"><div class="bg-logo-bg-inner"></div></div>

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-20">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <img src="https://i.postimg.cc/VvSyGkBV/EZ-LOGO-08.png" alt="EZ Maya Logo" class="h-12 w-auto mr-4">
                </div>
                <!-- Language Switcher -->
                <div class="flex items-center space-x-2">
                    <button id="lang-vi-btn" class="font-semibold text-blue-600 opacity-100 transition-opacity">VN</button>
                    <div class="w-px h-4 bg-gray-300"></div>
                    <button id="lang-en-btn" class="font-semibold text-gray-500 opacity-50 transition-opacity">EN</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12 md:py-16 flex-grow flex items-center justify-center relative z-10">
        <div class="w-full">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900 fade-in-up" data-key="mainTitle">Cổng Dịch Vụ Wifi</h1>
                <p class="text-gray-600 mt-4 text-lg max-w-2xl mx-auto fade-in-up" style="animation-delay: 0.2s;" data-key="mainSubtitle">Vui lòng chọn loại dịch vụ bạn muốn sử dụng.</p>
            </div>

            <!-- Quick Price Calculator -->
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg card-hover fade-in-up mb-8 max-w-4xl mx-auto" style="animation-delay: 0.4s;">
                <div class="flex items-center mb-6">
                    <div class="bg-yellow-100 text-yellow-600 p-3 rounded-full mr-4">
                        <i class="fas fa-calculator text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900" data-key="calculatorTitle">Báo Giá Nhanh</h2>
                        <p class="text-gray-500" data-key="calculatorSubtitle">Ước tính chi phí thuê thiết bị.</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-key="countryLabel">Quốc gia</label>
                        <select id="quick-quote-country"></select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-key="packageLabel">Gói data</label>
                        <select id="quick-quote-package" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="500MB/ngày">500MB/ngày</option>
                            <option value="1GB/ngày">1GB/ngày</option>
                            <option value="5GB/ngày">5GB/ngày</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-key="fromDateLabel">Từ ngày</label>
                        <input type="date" id="quick-quote-from" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                     <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-key="toDateLabel">Đến ngày</label>
                        <input type="date" id="quick-quote-to" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                <div id="quick-quote-result" class="mt-6 text-center text-xl font-bold text-blue-700 h-8"></div>
            </div>


            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto mt-12">
                
                <!-- Card 1: Đơn Hàng Thường (Login) -->
                <div class="bg-white p-8 rounded-xl shadow-lg card-hover fade-in-up" style="animation-delay: 0.6s;">
                    <div class="flex items-center mb-6">
                        <div class="bg-blue-100 text-blue-600 p-3 rounded-full mr-4">
                            <i class="fas fa-user-check text-2xl"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900" data-key="regularOrderTitle">Đơn Hàng Thường</h2>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <input type="text" id="login-username" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" data-key-placeholder="loginPlaceholder">
                        <div class="flex items-center">
                            <input id="login-remember-me" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="login-remember-me" class="ml-2 block text-sm text-gray-900" data-key="rememberMeLabel">Ghi nhớ tài khoản</label>
                        </div>
                        <button id="login-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-transform transform hover:scale-105" data-key="loginButton">Truy Cập Form</button>
                    </div>
                    <p id="login-error" class="text-red-500 text-sm mt-2 text-center h-5"></p>
                </div>

                <!-- Card 2: Đơn Hàng Doanh Nghiệp (Direct Link) -->
                <div class="bg-white p-8 rounded-xl shadow-lg card-hover fade-in-up flex flex-col justify-center items-center" style="animation-delay: 0.8s;">
                    <div class="flex items-center mb-6">
                        <div class="bg-purple-100 text-purple-600 p-3 rounded-full mr-4">
                            <i class="fas fa-building text-2xl"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900" data-key="corporateOrderTitle">Đơn Hàng Doanh Nghiệp</h2>
                        </div>
                    </div>
                    <a href="./corporate-form.html" class="w-full text-center bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition-transform transform hover:scale-105 mt-4" data-key="corporateButton">
                        Tạo Đơn Hàng Mới
                    </a>
                </div>

                <!-- Card 3: Tra Cứu Lịch Sử -->
                <div class="bg-white p-8 rounded-xl shadow-lg card-hover fade-in-up" style="animation-delay: 1s;">
                    <div class="flex items-center mb-6">
                        <div class="bg-green-100 text-green-600 p-3 rounded-full mr-4">
                            <i class="fas fa-history text-2xl"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900" data-key="historyTitle">Tra Cứu Lịch Sử</h2>
                            <p class="text-gray-500" data-key="historySubtitle">Xem lại các đơn hàng đã đăng ký.</p>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <input type="text" id="history-query" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" data-key-placeholder="historyPlaceholder">
                        <button id="history-button" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition-transform transform hover:scale-105" data-key="historyButton">Tra Cứu Ngay</button>
                    </div>
                     <p id="history-error" class="text-red-500 text-sm mt-2 text-center h-5"></p>
                </div>

            </div>
        </div>
    </main>

    <!-- History Modal -->
    <div id="history-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0 bg-black bg-opacity-60"></div>
        <div class="bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 p-6 z-10 fade-in-up">
            <div class="flex justify-between items-center mb-4 border-b pb-3">
                <h3 id="history-modal-title" class="text-2xl font-bold" data-key="historyModalTitle">Lịch sử đặt đơn</h3>
                <button id="close-modal-button" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="history-content" class="max-h-[70vh] overflow-y-auto"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="relative z-10">
        <div class="footer-company-info">
            <h2 data-key="companyNameVI">CÔNG TY TNHH MAYA VIETNAM</h2>
            <div class="en" data-key="companyNameEN">MAYA VIETNAM CO., LTD</div>
            <div class="line"><span class="label" data-key="addressLabel">Địa chỉ:</span> <span data-key="addressVI">Phòng 1630, Tầng 16, DAEHA BUSINESS CENTER, 360 Kim Mã, Giảng Võ, Hà Nội, Việt Nam</span></div>
            <div class="line en"><span class="label" data-key="addressLabelEN">Address:</span> <span data-key="addressEN">Room 1630, 16th Floor, DAEHA BUSINESS CENTER, 360 Kim Ma, Giang Vo, Hanoi, Vietnam</span></div>
            <div class="line"><span class="label" data-key="hotlineLabel">Hotline:</span> <span style="color:#da1a32;font-weight:bold;">0962 000 650</span> (<span data-key="langVI">Tiếng Việt</span>) &nbsp;|&nbsp; <span style="color:#2563eb;font-weight:bold;">0365 399 288</span> (<span data-key="langJP">Tiếng Nhật</span>)</div>
            <div class="line en"><span class="label" data-key="hotlineLabelEN">Hotline:</span> <span style="color:#da1a32;font-weight:bold;">0962 000 650</span> (<span data-key="langVI_en">Vietnamese</span>) &nbsp;|&nbsp; <span style="color:#2563eb;font-weight:bold;">0365 399 288</span> (<span data-key="langJP_en">Japanese</span>)</div>
        </div>
    </footer>

    <script>
        // --- CONFIG ---
        const accounts = {
            'his_user': { 
                path: './HIS/index.html', 
                unit: 'HIS',
                scriptUrl: 'https://script.google.com/macros/s/AKfycbxCEzp3E_n1B167Lfg4wfgoY1YMGTX9pPXwoU92EDZY5haOlxhjcIZdAt789qKfM86v/exec'
            },
            'toyota_user': { 
                path: './TOYOTA/index.html', 
                unit: 'TOYOTA',
                scriptUrl: 'https://script.google.com/macros/s/AKfycbw3aJxuzREpHk9hKveY1qpXDQgWZ-xek-sVu13eu_upzM7SlGOACSGzIbauSX1JIT0ewA/exec'
            },
            'yamaha_user': { 
                path: './YAMAHA/index.html', 
                unit: 'YAMAHA',
                scriptUrl: 'https://script.google.com/macros/s/AKfycbxfVMV90z_1KosHf83kOFU3NelA8auVoVstflIDuXVlI-RT2LVfOkoeJs7o4rx13f_kww/exec'
            },
            'corporate_search': {
                unit: 'CorporateOrders',
                scriptUrl: 'https://script.google.com/a/macros/ez-vn.com/s/AKfycbwVw7Xy1zoyQZUdGoHNy5ux6piCKnGBhCxIzWyDeAuKtMOQtfiEoB233jSzpUjfVxs95Q/exec'
            }
        };

        const translations = {
            vi: {
                mainTitle: "Cổng Dịch Vụ Wifi",
                mainSubtitle: "Vui lòng chọn loại dịch vụ bạn muốn sử dụng.",
                calculatorTitle: "Báo Giá Nhanh",
                calculatorSubtitle: "Ước tính chi phí thuê thiết bị.",
                countryLabel: "Quốc gia",
                packageLabel: "Gói data",
                fromDateLabel: "Từ ngày",
                toDateLabel: "Đến ngày",
                regularOrderTitle: "Đơn Hàng Thường",
                regularOrderSubtitle: "Dành cho khách hàng HIS, Toyota, Yamaha.",
                loginPlaceholder: "Nhập tài khoản",
                rememberMeLabel: "Ghi nhớ tài khoản",
                loginButton: "Truy Cập Form",
                corporateOrderTitle: "Đơn Hàng Doanh Nghiệp",
                corporateOrderSubtitle: "Dành cho khách hàng có mã giảm giá.",
                corporateButton: "Tạo Đơn Hàng Mới",
                historyTitle: "Tra Cứu Lịch Sử",
                historySubtitle: "Xem lại các đơn hàng đã đăng ký.",
                historyPlaceholder: "Nhập tài khoản hoặc Mã số thuế",
                historyButton: "Tra Cứu Ngay",
                historyModalTitle: "Lịch sử đặt đơn",
                companyNameVI: "CÔNG TY TNHH MAYA VIETNAM",
                companyNameEN: "MAYA VIETNAM CO., LTD",
                addressLabel: "Địa chỉ:",
                addressVI: "Phòng 1630, Tầng 16, DAEHA BUSINESS CENTER, 360 Kim Mã, Giảng Võ, Hà Nội, Việt Nam",
                addressLabelEN: "Address:",
                addressEN: "Room 1630, 16th Floor, DAEHA BUSINESS CENTER, 360 Kim Ma, Giang Vo, Hanoi, Vietnam",
                hotlineLabel: "Hotline:",
                langVI: "Tiếng Việt",
                langJP: "Tiếng Nhật",
                hotlineLabelEN: "Hotline:",
                langVI_en: "Vietnamese",
                langJP_en: "Japanese",
            },
            en: {
                mainTitle: "Wifi Service Portal",
                mainSubtitle: "Please select the service you want to use.",
                calculatorTitle: "Quick Quote",
                calculatorSubtitle: "Estimate the cost of renting equipment.",
                countryLabel: "Country",
                packageLabel: "Data Package",
                fromDateLabel: "From date",
                toDateLabel: "To date",
                regularOrderTitle: "Standard Orders",
                regularOrderSubtitle: "For HIS, Toyota, Yamaha customers.",
                loginPlaceholder: "Enter account",
                rememberMeLabel: "Remember account",
                loginButton: "Access Form",
                corporateOrderTitle: "Corporate Orders",
                corporateOrderSubtitle: "For customers with discount codes.",
                corporateButton: "Create New Order",
                historyTitle: "Order History",
                historySubtitle: "Review your registered orders.",
                historyPlaceholder: "Enter account or Tax Code",
                historyButton: "Search Now",
                historyModalTitle: "Order History",
                companyNameVI: "MAYA VIETNAM CO., LTD",
                companyNameEN: "",
                addressLabel: "Address:",
                addressVI: "Room 1630, 16th Floor, DAEHA BUSINESS CENTER, 360 Kim Ma, Giang Vo, Hanoi, Vietnam",
                addressLabelEN: "",
                addressEN: "",
                hotlineLabel: "Hotline:",
                langVI: "Vietnamese",
                langJP: "Japanese",
                hotlineLabelEN: "",
                langVI_en: "",
                langJP_en: "",
            }
        };

        // --- SCRIPT LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const CURRENT_PRICE_TABLE = typeof PRICE_TABLE !== 'undefined' ? PRICE_TABLE : {};
            const COUNTRY_LIST = Object.keys(CURRENT_PRICE_TABLE).sort();

            const langViBtn = document.getElementById('lang-vi-btn');
            const langEnBtn = document.getElementById('lang-en-btn');
            
            const quickQuoteCountryEl = document.getElementById('quick-quote-country');
            const quickQuotePackageEl = document.getElementById('quick-quote-package');
            const quickQuoteFromEl = document.getElementById('quick-quote-from');
            const quickQuoteToEl = document.getElementById('quick-quote-to');
            const quickQuoteResultEl = document.getElementById('quick-quote-result');
            
            let countryChoices;

            // --- FUNCTIONS ---
            function setLanguage(lang) {
                document.documentElement.lang = lang;
                const translation = translations[lang];
                document.querySelectorAll('[data-key]').forEach(el => {
                    const key = el.getAttribute('data-key');
                    if (translation[key]) {
                        el.textContent = translation[key];
                    }
                });
                 document.querySelectorAll('[data-key-placeholder]').forEach(el => {
                    const key = el.getAttribute('data-key-placeholder');
                    if (translation[key]) {
                        el.placeholder = translation[key];
                    }
                });

                if (lang === 'en') {
                    langEnBtn.classList.remove('opacity-50', 'text-gray-500');
                    langEnBtn.classList.add('opacity-100', 'text-blue-600');
                    langViBtn.classList.add('opacity-50', 'text-gray-500');
                    langViBtn.classList.remove('opacity-100', 'text-blue-600');
                    document.querySelectorAll('.en').forEach(el => el.style.display = 'block');
                } else {
                    langViBtn.classList.remove('opacity-50', 'text-gray-500');
                    langViBtn.classList.add('opacity-100', 'text-blue-600');
                    langEnBtn.classList.add('opacity-50', 'text-gray-500');
                    langEnBtn.classList.remove('opacity-100', 'text-blue-600');
                    document.querySelectorAll('.en').forEach(el => el.style.display = 'none');
                }
            }

            function calcDays(from, to) {
                if (!from || !to) return 1;
                const d1 = new Date(from);
                const d2 = new Date(to);
                const ms = d2.getTime() - d1.getTime();
                if (ms < 0) return 1;
                return Math.round(ms / 86400000) + 1;
            };

            function calcPrice(country, pkg, days) {
                if (!CURRENT_PRICE_TABLE[country] || !pkg || !days) return null;
                const unit = CURRENT_PRICE_TABLE[country][pkg];
                if (unit === null || typeof unit === 'undefined') return null;
                const total = unit * days;
                const vat = Math.round(total * 0.1);
                const grandTotal = total + vat;
                return { total, vat, grandTotal };
            };

            function updateQuickQuote() {
                const country = quickQuoteCountryEl.value;
                const pkg = quickQuotePackageEl.value;
                const from = quickQuoteFromEl.value;
                const to = quickQuoteToEl.value;

                if (!country || !pkg || !from || !to) {
                    quickQuoteResultEl.textContent = '';
                    return;
                }

                const days = calcDays(from, to);
                const result = calcPrice(country, pkg, days);

                if (result) {
                    const formattedTotal = result.grandTotal.toLocaleString('vi-VN');
                    quickQuoteResultEl.textContent = `Tổng chi phí (gồm VAT): ${formattedTotal} VND`;
                } else {
                    quickQuoteResultEl.textContent = `Gói cước không áp dụng cho quốc gia này.`;
                }
            }
            
            function initializeQuickQuote() {
                countryChoices = new Choices(quickQuoteCountryEl, {
                    searchEnabled: true,
                    itemSelectText: 'Chọn',
                    shouldSort: false,
                    choices: COUNTRY_LIST.map(c => ({ value: c, label: c }))
                });

                [quickQuoteCountryEl, quickQuotePackageEl, quickQuoteFromEl, quickQuoteToEl].forEach(el => {
                    el.addEventListener('change', updateQuickQuote);
                });
            }

            // --- INITIALIZE ---
            setLanguage('vi');
            initializeQuickQuote();
            
            // --- EVENT LISTENERS ---
            langViBtn.addEventListener('click', () => setLanguage('vi'));
            langEnBtn.addEventListener('click', () => setLanguage('en'));

            // ... (Phần Event Listeners cho Login và History giữ nguyên) ...
        });
    </script>

</body>
</html>
